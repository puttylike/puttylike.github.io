{"componentChunkName":"component---src-templates-blog-post-js","path":"/gatsby로-github-blog-만들기-2/","result":{"data":{"markdownRemark":{"html":"<p>다른 블로그 돌아다니다 보니, 게시글에 대한 목차가 있는 게 뭔가 신기했다. 마크다운 문법 찾으며 정리하던 중에 이를 TOC 라고 하는 걸 알게 됐다. 내가 나중에 글 다시 읽을 때 유용할 거 같아 보여서 블로그에 해당 기능(?)을 추가하기로 마음 먹었다.  </p>\n<p>gatsby-remark-table-of-contents 플러그인이 존재하지만, 추석 기념으로 수정해 봤다. 리액트 공부를 해야 이걸 이해할 텐데... ㅎㅎ... ㅠ...<br>\n[참고] mdx 말고 markdownRemark(md)를 사용하며, 최소한의 소스코드만 사용합니다.<br>\n메모  </p>\n<ul>\n<li><a href=\"https://thelocalhost.blog/2020/02/13/smooth-scroll-toc-gatsby/\">https://thelocalhost.blog/2020/02/13/smooth-scroll-toc-gatsby/</a>  </li>\n<li><a href=\"https://www.gatsbyjs.com/plugins/gatsby-remark-autolink-headers/\">https://www.gatsbyjs.com/plugins/gatsby-remark-autolink-headers/</a>  </li>\n<li><a href=\"https://blueshw.github.io/2020/05/30/table-of-contents/\">https://blueshw.github.io/2020/05/30/table-of-contents/</a>  </li>\n<li><a href=\"https://whywhyy.me/blog/2020/06/10/%EA%B3%A0%EC%98%A4%EA%B8%89%20%EB%AA%A9%EC%B0%A8(Table%20of%20Contents)%EC%9D%84%20%EB%A7%8C%EB%93%A4%EC%96%B4%EB%B3%B4%EC%9E%90\">https://whywhyy.me/blog/2020/06/10/%EA%B3%A0%EC%98%A4%EA%B8%89%20%EB%AA%A9%EC%B0%A8(Table%20of%20Contents)%EC%9D%84%20%EB%A7%8C%EB%93%A4%EC%96%B4%EB%B3%B4%EC%9E%90</a></li>\n<li><a href=\"https://rebassjs.org/getting-started/\">https://rebassjs.org/getting-started/</a>  </li>\n<li><a href=\"https://github.com/gatsbyjs/gatsby/blob/master/www/src/components/docs-table-of-contents.js\">https://github.com/gatsbyjs/gatsby/blob/master/www/src/components/docs-table-of-contents.js</a></li>\n<li>\n<p>css - position : sticky<br>\ncf. gatsby-remark-autolink-headers는 gatsby-transformer-remark 의 sub-plugin 이다.  </p>\n<hr>\n<h2 id=\"깃허브로-블로그-만들기---2\" style=\"position:relative;\">깃허브로 블로그 만들기 - 2<a href=\"#%EA%B9%83%ED%97%88%EB%B8%8C%EB%A1%9C-%EB%B8%94%EB%A1%9C%EA%B7%B8-%EB%A7%8C%EB%93%A4%EA%B8%B0---2\" aria-label=\"깃허브로 블로그 만들기   2 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n</li>\n</ul>\n<h4 id=\"1-관련-플러그인-설치\" style=\"position:relative;\">(1) 관련 플러그인 설치<a href=\"#1-%EA%B4%80%EB%A0%A8-%ED%94%8C%EB%9F%AC%EA%B7%B8%EC%9D%B8-%EC%84%A4%EC%B9%98\" aria-label=\"1 관련 플러그인 설치 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<ol>\n<li>\n<p>gatsby-plugin-mdx 설치  </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">$ npm install gatsby-plugin-mdx @mdx-js/mdx @mdx-js/react</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n<li>\n<p>gatsby-config.js 파일 수정 - plugins 안에 추가한다.  </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">module.exports = {\nplugins: [\n{\n  resolve: `gatsby-source-filesystem`,\n  options: {\n    name: `posts`,\n    path: `${__dirname}/src/posts/`,\n  },\n},\n{\n  resolve: `gatsby-plugin-mdx`,\n  options: {\n    extensions: [`.mdx`, `.md`],\n    gatsbyRemarkPlugins: [],\n  },\n},\n],\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>localhost:8000/__graphql 에서 allMdx 를 쓸 수 있게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">{\nallMdx {\nnodes {\n  excerpt\n}\n}\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n<li>\n<p>gatsby-remark-auto-headers 설치  </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">$ npm install gatsby-remark-auto-headers</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n</li>\n<li>\n<p>gatsby-config.js 파일 수정 - gatsby-transformer-remark 안에 추가한다.<br>\ngatsby-remark-prismjs를 쓰고 있다면, gatsby-remark-auto-headers 이 먼저 오게 써야 한다.  </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">{\nresolve: `gatsby-transformer-remark`,\noptions: {\nplugins: [\n  {\n    resolve: `gatsby-remark-autolink-headers`,\n    options: {\n      offsetY: `100`,\n      icon: `&lt;svg aria-hidden=&quot;true&quot; height=&quot;20&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;20&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;`,\n      className: `custom-class`,\n      maintainCase: true,\n      removeAccents: true,\n      isIconAfterHeader: true,\n      // elements: [`h1`, `h4`],\n    },\n  },\n],\n},\n},</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n</li>\n</ol>\n<p>게시물 내 헤더 쪽에 링크 고리가 보인다.</p>\n<ol start=\"6\">\n<li>404.js 파일 생성 관련</li>\n</ol>\n<p>개발자 도구로 보다 보니까 없다고 뜨는데, 귀찮아서 일단은 패스했다. (...)</p>\n<ol start=\"7\">\n<li>rebass 패키지 설치 - Box 관련</li>\n</ol>\n<p>안 해도 상관없겠지만, 뭔가 위치가 깔끔하게 안 잡히는 거 같아서 결국 설치했다. 내가 백만 하니까 이런가 싶고...</p>\n<p>$npm install rebass$ npm install styled-components</p>\n<hr>\n<h4 id=\"2-toc-생성하기\" style=\"position:relative;\">(2) toc 생성하기<a href=\"#2-toc-%EC%83%9D%EC%84%B1%ED%95%98%EA%B8%B0\" aria-label=\"2 toc 생성하기 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<ol>\n<li>/src/components/에 tableOfContents.js 파일을 생성한다.</li>\n<li>최소한의 소스 코드는 이정도.  </li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">import React from &#39;react&#39;;\n\nexport default function TableOfContents({ items, currentHeaderUrl }) {\n  return items ? (\n    &lt;div&gt;\n        &lt;p&gt;Table of Contents&lt;/p&gt;\n      &lt;ul dangerouslySetInnerHTML={{ __html: items }}\n      &gt;\n      &lt;/ul&gt;\n    &lt;/div&gt;\n  ) : null\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ol start=\"8\">\n<li>/src/templates/blog-post.js 기존 파일 내용을 수정했다.</li>\n</ol>\n<p>TableOfContents 를 import하고, return 내 Layout 위쪽에 추가했다.<br>\n최소한의 코드.  </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">      &lt;TableOfContents items={tocItems} /&gt;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>query에 tableOfContents를 추가했다. (1줄)</p>\n<p>useEffect를 추가했다. 스크롤 관련 함수인데 깊게 뜯어보진 못 했다. 아직까지.</p>\n<hr>\n<h4 id=\"-개선하고-싶은-부분\" style=\"position:relative;\">** 개선하고 싶은 부분<a href=\"#-%EA%B0%9C%EC%84%A0%ED%95%98%EA%B3%A0-%EC%8B%B6%EC%9D%80-%EB%B6%80%EB%B6%84\" aria-label=\" 개선하고 싶은 부분 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h4>\n<ul>\n<li>TOC 관련<br>\n특정 헤더에 갖다 대면 글씨 하이라이트 되는 거 하고 싶은데 해도 해도 잘 안 되는 거 같다...? hook을 추가해 봤으나 안 되길래 일단 삭제했다. 에휴.</li>\n<li>블로그 관련<br>\nTOC가 생겼으니, 잘 활용할 수 있게끔.. 그동안 작성한 게시글들을 수정해야겠다.\n그리고 gatsby-remark-prismjs 같은 플러그인 설치해서 코드 잘 보이게 할 예정이다.\n또한, 카테고리(메뉴)나 태그로 글 모아보기 기능, 댓글달기 기능을 추가하고 싶다.</li>\n</ul>","tableOfContents":"<ul>\n<li><a href=\"/gatsby%EB%A1%9C-github-blog-%EB%A7%8C%EB%93%A4%EA%B8%B0-2/#1-%EA%B4%80%EB%A0%A8-%ED%94%8C%EB%9F%AC%EA%B7%B8%EC%9D%B8-%EC%84%A4%EC%B9%98\">(1) 관련 플러그인 설치</a></li>\n<li><a href=\"/gatsby%EB%A1%9C-github-blog-%EB%A7%8C%EB%93%A4%EA%B8%B0-2/#2-toc-%EC%83%9D%EC%84%B1%ED%95%98%EA%B8%B0\">(2) toc 생성하기</a></li>\n<li><a href=\"/gatsby%EB%A1%9C-github-blog-%EB%A7%8C%EB%93%A4%EA%B8%B0-2/#-%EA%B0%9C%EC%84%A0%ED%95%98%EA%B3%A0-%EC%8B%B6%EC%9D%80-%EB%B6%80%EB%B6%84\">** 개선하고 싶은 부분</a></li>\n</ul>","frontmatter":{"title":"Github Blog 만들기2 - table Of Contents 추가(by gatsby)"}}},"pageContext":{"slug":"/gatsby로-github-blog-만들기-2/"}},"staticQueryHashes":["3159585216"]}